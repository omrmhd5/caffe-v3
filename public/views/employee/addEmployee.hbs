{{> header}}
{{> navbar/navbar}}

<div class="row">
  <div class="col d-flex justify-content-center">
    <div class="col-12 col-md-6">
      {{#if successMessage}}
      <div class="alert alert-success alert-dismissable">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
        {{successMessage}}
      </div>
      {{/if}}
      {{#if errorMessage}}
      <div class="alert alert-danger alert-dismissable">
        <a href="#" class="close text-danger" data-dismiss="alert" aria-label="close">×</a>
        {{errorMessage}}
      </div>
      {{/if}}
      <div>
        <div class="headerPage">
          <div class="Title">
            <h2 class="text-center">إضافة موظف جديد</h2>
          </div>
        </div>
        <div class="card-body p-0">
          <form action="/employees/add" method="POST" class="col-12">
            <div class="form-group col-md-6 col-12 float-right" id="nameGroup">
              <label for="employeeName" class="float-right">
                <p class="select">الاسم</p>
              </label>
              <input type="text" id="employeeName" name="employeeName" class="form-control" placeholder="الاسم "
                dir="rtl" value="{{employeeName}}" required>
            </div>
            <div class="form-group col-md-6 col-12 float-right" id="employeeIDGroup">
              <label for="employeeID" class="float-right">
                <p class="select">رقم الموظف</p>
              </label>
              <input type="text" id="employeeID" name="employeeID" class="form-control" placeholder="رقم الموظف"
                dir="rtl" value="{{employeeID}}" required>
            </div>
            <div class="form-group col-md-6 col-12 float-right" dir="rtl" id="branchGroup">
              <label for="branchID" class="float-right">
                <p class="select">اختر الفرع</p>
              </label>
              <select class="form-control form-control" id="branchID" name="branchID" required>
                {{#unless branchID}}
                <option value="" selected>اختار...</option>
                {{/unless}}
                {{#each branches}}
                <option value="{{_id}}" {{selected}}>{{branchname}}</option>
                {{/each}}
              </select>
            </div>
            <div class="form-group col-md-6 col-12 float-right" id="nationalityGroup">
              <label for="nationality" class="float-right">
                <p class="select">الجنسية</p>
              </label>
              <input type="text" id="nationality" name="nationality" class="form-control" placeholder="الجنسية"
                dir="rtl" value="{{nationality}}" required>
            </div>
            <div class="form-group col-md-6 col-12 float-right" id="idNumberGroup">
              <label for="idNumber" class="float-right">
                <p class="select">رقم الهوية/الإقامة</p>
              </label>
              <input type="text" id="idNumber" name="idNumber" class="form-control" placeholder="رقم الهوية/الإقامة"
                dir="rtl" value="{{idNumber}}" required>
            </div>
            <div class="form-group col-md-6 col-12 float-right" id="residencyExpiryDateGroup">
              <label for="residencyExpiryDate" class="float-right">
                <p class="select">تاريخ انتهاء الإقامة</p>
              </label>
              <input type="date" id="residencyExpiryDate" name="residencyExpiryDate" class="form-control" 
                dir="rtl" value="{{residencyExpiryDate}}" required min="{{today}}">
            </div>
            <div class="modal-footer border-0 center Center row">
              <a href="/employees" class=" btnclass btn-round">
                <h6 class="select">الرجوع</h6>
              </a>
              <button type="submit" class=" btnclass">
                <h6 class="select"> أضف الموظف </h6>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{{> footer}}

<script>
  // Set minimum date to today for residency expiry date
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('residencyExpiryDate').setAttribute('min', today);
</script>

{{> footer/employeeFooter}}